<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KuikoDelivery - Gu√≠a y Tienda</title>
    <style>
        /* Estilos generales */
        :root {
            --color-primario: #4b2a70;
            --color-secundario: #ff5722;
            --color-blanco: #fff;
            --sombra: 0 3px 10px rgba(0,0,0,0.1);
            --transicion: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }

        header {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 1rem;
        }

        .hero {
            /* Imagen de fondo de alta calidad sobre eCommerce */
            background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1556740738-b6a63e27c4df?ixlib=rb-4.0.3&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1600');
            background-size: cover;
            background-position: center;
            color: white;
            text-align: center;
            padding: 5rem 1rem;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 0.5rem;
            font-weight: bold;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.6);
        }

        .hero p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .search-container {
            max-width: 600px;
            margin: 1rem auto;
            padding: 0 1rem;
        }

        #search-input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #ddd;
            border-radius: 30px;
            font-size: 1rem;
            outline: none;
        }

        /* --- Filtros Principales (Gu√≠a y Tienda) --- */
        .filtros-principales {
            display: flex;
            gap: 0.8rem;
            padding: 1.2rem;
            overflow-x: auto;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
            justify-content: center;
        }

        .filtro-btn-principal {
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 30px;
            background: #e0e0e0;
            cursor: pointer;
            white-space: nowrap;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filtro-btn-principal.active {
            background: #3498db;
            color: white;
        }

        /* --- SECCI√ìN GU√çA DE NEGOCIOS --- */
        .contenedor-guia {
            max-width: 1200px;
            margin: 1rem auto;
            padding: 1rem;
        }

        .lista-negocios h2 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }

        #negocios-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .negocio-card {
            padding: 1.5rem;
            border-radius: 10px;
            background: #fff;
            box-shadow: var(--sombra);
            border: 1px solid #eee;
        }
        
        .negocio-card h3 { color: #2c3e50; font-size: 1.3rem; margin-bottom: 0.8rem; }
        .negocio-card .categoria { display: inline-block; padding: 0.3rem 0.8rem; background: #e3f2fd; color: #1976d2; border-radius: 20px; font-size: 0.8rem; font-weight: 600; margin-bottom: 1rem; }
        .negocio-card p { margin: 0.5rem 0; color: #555; }
        .servicios { margin-top: 1rem; padding-top: 1rem; border-top: 1px dashed #ddd; }
        .servicios span { display: inline-block; background: #f5f5f5; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem; margin: 0.2rem; }
        
        /* --- SECCI√ìN TIENDA --- */
        .filtros-tienda {
            display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; padding: 1rem; background: #f0e6ff; margin: 1rem 0;
        }
        .filtro-btn-tienda { padding: 0.5rem 1rem; border: 2px solid var(--color-primario); border-radius: 20px; background: var(--color-blanco); color: var(--color-primario); cursor: pointer; transition: var(--transicion); font-size: 0.9rem; }
        .filtro-btn-tienda.active, .filtro-btn-tienda:hover { background: var(--color-primario); color: var(--color-blanco); }
        .productos-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 2rem; padding: 1rem; max-width: 1200px; margin: 0 auto; }
        .producto-card { background: var(--color-blanco); border-radius: 10px; overflow: hidden; box-shadow: var(--sombra); display: flex; flex-direction: column; }
        .producto-img { width: 100%; height: 200px; object-fit: cover; display: block; background-color: #eee; }
        .producto-info { padding: 1rem; display: flex; flex-direction: column; flex-grow: 1; }
        .producto-titulo { font-size: 1.2rem; margin: 0 0 0.5rem 0; color: var(--color-primario); }
        .producto-precio { font-weight: bold; font-size: 1.3rem; color: #2a0a4a; margin: 0.5rem 0; }
        .metodo-pago { font-size: 0.8rem; color: var(--color-secundario); font-style: italic; }
        .producto-desc { font-size: 0.9rem; color: #666; margin: 0.5rem 0 1rem 0; flex-grow: 1; }
        .producto-disponibilidad { font-size: 0.8rem; color: #4CAF50; margin-bottom: 1rem; }
        .cantidad-selector { display: flex; align-items: center; margin-bottom: 1rem; }
        .cantidad-btn { width: 35px; height: 35px; border: 1px solid #ddd; background: #f5f5f5; font-size: 1rem; cursor: pointer; }
        .cantidad-input { width: 50px; text-align: center; border: 1px solid #ddd; margin: 0 5px; font-size: 1rem; }
        .add-to-cart { width: 100%; padding: 0.8rem; background: var(--color-primario); color: var(--color-blanco); border: none; border-radius: 5px; font-weight: bold; cursor: pointer; margin-top: auto; }

        /* --- CARRITO DE COMPRAS Y MODAL --- */
        .carrito-flotante { position: fixed; bottom: 30px; right: 30px; background: var(--color-primario); color: var(--color-blanco); width: 60px; height: 60px; border-radius: 50%; display: none; align-items: center; justify-content: center; cursor: pointer; z-index: 1000; }
        .carrito-icono { font-size: 1.5rem; position: relative; }
        .carrito-contador { position: absolute; top: -10px; right: -10px; background: var(--color-secundario); width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; }
        .carrito-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center; }
        .carrito-contenido { background: var(--color-blanco); width: 90%; max-width: 800px; max-height: 90vh; border-radius: 10px; display: flex; flex-direction: column; }
        .carrito-header { background: var(--color-primario); color: var(--color-blanco); padding: 1rem; display: flex; justify-content: space-between; align-items: center; }
        .carrito-cerrar { background: none; border: none; color: var(--color-blanco); font-size: 1.5rem; cursor: pointer; }
        .carrito-body { padding: 1rem; overflow-y: auto; flex-grow: 1; }
        .carrito-item { display: flex; align-items: center; padding: 1rem 0; border-bottom: 1px solid #eee; }
        .carrito-item-img { width: 60px; height: 60px; object-fit: cover; border-radius: 5px; margin-right: 1rem; }
        .carrito-item-info { flex-grow: 1; }
        .carrito-item-titulo { font-weight: bold; }
        .carrito-item-precio { color: var(--color-primario); font-size: 0.9rem; }
        .carrito-item-eliminar { background: none; border: none; color: var(--color-secundario); cursor: pointer; font-size: 1.2rem; }
        .carrito-total { padding: 1rem; text-align: right; font-size: 1.2rem; font-weight: bold; border-top: 2px solid var(--color-primario); }
        .formulario-pedido { padding: 1rem; background: #f9f5ff; }
        .form-group { margin-bottom: 1rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
        .form-group input { width: 100%; padding: 0.7rem; border: 1px solid #ddd; border-radius: 5px; }
        .btn-pedido { padding: 0.8rem 1.5rem; border: none; border-radius: 5px; cursor: pointer; }
        .btn-whatsapp { background: #25D366; color: var(--color-blanco); }

        footer { background: #2c3e50; color: white; text-align: center; padding: 2rem 1rem; margin-top: 2rem; }
    </style>
</head>
<body>
    <header>
        <!-- T√≠tulo del negocio principal -->
    </header>

    <div class="hero">
        <h1>KuikoDelivery!</h1>
        <p>Todo lo que necesitas en un solo lugar</p>
    </div>

    <div class="filtros-principales">
        <button class="filtro-btn-principal active" data-vista="guia">üè¢ Gu√≠a de Negocios</button>
        <button class="filtro-btn-principal" data-vista="tienda">üõçÔ∏è Tienda</button>
    </div>

    <!-- SECCI√ìN DE LA GU√çA DE NEGOCIOS -->
    <div id="guia-section">
        <div class="search-container">
            <input type="text" id="search-input" placeholder="Buscar negocios por nombre, direcci√≥n o servicio...">
        </div>
        <div class="contenedor-guia">
            <div class="lista-negocios">
                <h2>Negocios Destacados</h2>
                <div id="negocios-container"></div>
            </div>
        </div>
    </div>

    <!-- SECCI√ìN DE LA TIENDA -->
    <div id="tienda-section" style="display: none;">
        <div class="filtros-tienda">
            <button class="filtro-btn-tienda active" data-categoria="todos">Todos</button>
            <button class="filtro-btn-tienda" data-categoria="tecnologia">Tecnolog√≠a</button>
            <button class="filtro-btn-tienda" data-categoria="hogar">Hogar</button>
            <button class="filtro-btn-tienda" data-categoria="motores">Motores</button>
        </div>
        <div class="productos-grid">
            <!-- Los productos se cargar√°n aqu√≠ din√°micamente con JavaScript -->
        </div>
    </div>

    <!-- Carrito flotante -->
    <div class="carrito-flotante" id="carritoBtn">
        <div class="carrito-icono">üõí <span class="carrito-contador">0</span></div>
    </div>

    <!-- Modal del carrito -->
    <div class="carrito-modal" id="carritoModal">
        <div class="carrito-contenido">
            <div class="carrito-header">
                <h2>Tu Carrito</h2>
                <button class="carrito-cerrar" id="cerrarCarrito">√ó</button>
            </div>
            <div class="carrito-body" id="carritoItems"></div>
            <div class="carrito-total">Total: <span id="carritoTotal">$0.00</span></div>
            <div class="formulario-pedido">
                <h3>Informaci√≥n del Cliente</h3>
                <div class="form-group"><label for="nombre">Nombre</label><input type="text" id="nombre"></div>
                <div class="form-group"><label for="direccion">Direcci√≥n</label><input type="text" id="direccion"></div>
                <div class="form-group"><label for="telefono">Tel√©fono</label><input type="tel" id="telefono"></div>
                <button class="btn-pedido btn-whatsapp" id="enviarWhatsapp">Enviar por WhatsApp</button>
            </div>
        </div>
    </div>
    
    <footer>
        <p>KuikoDelivery - Santiago de Cuba</p>
        <p>¬© 2025 - Todos los derechos reservados</p>
    </footer>

    <script>
        // --- DATOS INICIALES ---
        const negocios_guia = [
            { nombre: "Club LED", categoria: "restaurantes", direccion: "Calle 8, Santiago de Cuba", telefono: "+53 12345678", servicios: ["Comida cubana", "Delivery"], horario: "10:00 AM - 11:00 PM" },
            { nombre: "Terraza Padre Pico", categoria: "restaurantes", direccion: "Padre Pico, Santiago de Cuba", telefono: "+53 23456789", servicios: ["Comida cubana", "Vistas"], horario: "11:00 AM - 10:00 PM" },
            { nombre: "Conta's Empanada Plus", categoria: "comida-rapida", direccion: "Calle Aguilera, Santiago de Cuba", telefono: "+53 45678901", servicios: ["Empanadas", "Pizzas", "Delivery"], horario: "8:00 AM - 10:00 PM" },
            { nombre: "Farmacias Vitality Pets", categoria: "farmacias", direccion: "Av. Victoriano Garz√≥n, Santiago de Cuba", telefono: "+53 67890123", servicios: ["Medicamentos", "Mascotas"], horario: "8:00 AM - 8:00 PM" },
            { nombre: "Mercado Santiago", categoria: "tiendas", direccion: "Calle Santo Tom√°s, Santiago de Cuba", telefono: "+53 89012345", servicios: ["Alimentos", "Ferreter√≠a"], horario: "8:00 AM - 6:00 PM" },
        ];
        
        // ---- NUEVOS DATOS DE PRODUCTOS DE TIENDA (1 a 37) ----
        let productos_tienda = [];
        const categorias = ['tecnologia', 'hogar', 'motores'];
        for (let i = 1; i <= 37; i++) {
            productos_tienda.push({
                id: i,
                nombre: `Producto de Tienda ${i}`,
                precio: parseFloat((Math.random() * 100 + 10).toFixed(2)), // Precio aleatorio entre 10 y 110
                moneda: "CUP",
                descripcion: `Esta es la descripci√≥n detallada del producto n√∫mero ${i}. Es un art√≠culo de alta calidad.`,
                disponibilidad: Math.random() > 0.2 ? "En stock" : "Agotado", // 80% de probabilidad de estar en stock
                categoria: categorias[i % categorias.length], // Asigna una categor√≠a de forma rotativa
                metodoPago: "Aceptamos Zelle y Transferencia"
            });
        }


        // --- L√ìGICA GENERAL Y CAMBIO DE VISTA ---
        document.addEventListener('DOMContentLoaded', () => {
            const guiaSection = document.getElementById('guia-section');
            const tiendaSection = document.getElementById('tienda-section');
            const carritoFlotante = document.getElementById('carritoBtn');
            const botonesVista = document.querySelectorAll('.filtro-btn-principal');

            botonesVista.forEach(btn => {
                btn.addEventListener('click', () => {
                    botonesVista.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    const vista = btn.dataset.vista;
                    guiaSection.style.display = vista === 'guia' ? 'block' : 'none';
                    tiendaSection.style.display = vista === 'tienda' ? 'block' : 'none';
                    carritoFlotante.style.display = vista === 'tienda' ? 'flex' : 'none';
                });
            });

            inicializarGuia();
            inicializarTienda();
            
            // Inicia en la vista de gu√≠a por defecto
            document.querySelector('[data-vista="guia"]').click();
        });

        // --- L√ìGICA DE LA GU√çA DE NEGOCIOS ---
        function inicializarGuia() {
            const searchInput = document.getElementById('search-input');
            const container = document.getElementById("negocios-container");

            function mostrarNegocios(negocios) {
                container.innerHTML = "";
                negocios.forEach(n => {
                    container.innerHTML += `
                        <div class="negocio-card">
                            <h3>${n.nombre}</h3><span class="categoria">${n.categoria}</span>
                            <p><strong>üìç Direcci√≥n:</strong> ${n.direccion}</p>
                            <p><strong>üìû Tel√©fono:</strong> ${n.telefono}</p>
                            <p><strong>üïí Horario:</strong> ${n.horario}</p>
                            <div class="servicios">${n.servicios.map(s => `<span>${s}</span>`).join("")}</div>
                        </div>`;
                });
            }

            searchInput.addEventListener("input", () => {
                const termino = searchInput.value.toLowerCase();
                const filtrados = negocios_guia.filter(n => 
                    n.nombre.toLowerCase().includes(termino) || n.direccion.toLowerCase().includes(termino)
                );
                mostrarNegocios(filtrados);
            });
            mostrarNegocios(negocios_guia);
        }

        // --- L√ìGICA DE LA TIENDA Y CARRITO ---
        function inicializarTienda() {
            let carrito = [];
            const productosGrid = document.querySelector('.productos-grid');
            const filtroBtnsTienda = document.querySelectorAll('.filtro-btn-tienda');
            const carritoBtn = document.getElementById('carritoBtn');
            const carritoModal = document.getElementById('carritoModal');
            const cerrarCarrito = document.getElementById('cerrarCarrito');
            const carritoItemsEl = document.getElementById('carritoItems');
            const carritoTotalEl = document.getElementById('carritoTotal');
            const contadorCarritoEl = document.querySelector('.carrito-contador');
            const enviarWhatsappBtn = document.getElementById('enviarWhatsapp');

            // Renderizar productos desde el array local
            renderizarProductos(productos_tienda);

            function renderizarProductos(productos) {
                productosGrid.innerHTML = "";
                productos.forEach(p => {
                    // La imagen se genera din√°micamente: tienda1.jpg, tienda2.jpg, etc.
                    const imagenSrc = `tienda${p.id}.jpg`;
                    productosGrid.innerHTML += `
                        <div class="producto-card" data-id="${p.id}">
                            <img src="${imagenSrc}" alt="${p.nombre}" class="producto-img" onerror="this.onerror=null;this.src='https://via.placeholder.com/280x200?text=Producto+${p.id}';">
                            <div class="producto-info">
                                <h3 class="producto-titulo">${p.nombre}</h3>
                                <p class="producto-precio">$${p.precio} ${p.moneda}</p>
                                ${p.metodoPago ? `<p class="metodo-pago">${p.metodoPago}</p>` : ''}
                                <p class="producto-desc">${p.descripcion}</p>
                                <p class="producto-disponibilidad" style="color: ${p.disponibilidad === 'En stock' ? '#4CAF50' : '#F44336'};">${p.disponibilidad}</p>
                                <div class="cantidad-selector">
                                    <button class="cantidad-btn minus">-</button>
                                    <input type="number" value="1" min="1" class="cantidad-input">
                                    <button class="cantidad-btn plus">+</button>
                                </div>
                                <button class="add-to-cart" ${p.disponibilidad !== 'En stock' ? 'disabled' : ''}>A√±adir al carrito</button>
                            </div>
                        </div>`;
                });
            }

            function actualizarCarritoUI() {
                carritoItemsEl.innerHTML = '';
                let totalMonedaPrincipal = 0;
                let totalItems = 0;
                
                if (carrito.length === 0) {
                    carritoItemsEl.innerHTML = '<p style="text-align:center;">Tu carrito est√° vac√≠o</p>';
                } else {
                    carrito.forEach((item, index) => {
                        const producto = productos_tienda.find(p => p.id === item.id);
                        const subtotal = producto.precio * item.cantidad;
                        totalItems += item.cantidad;
                        totalMonedaPrincipal += subtotal;

                        carritoItemsEl.innerHTML += `
                            <div class="carrito-item">
                                <img src="tienda${producto.id}.jpg" alt="${producto.nombre}" class="carrito-item-img" onerror="this.onerror=null;this.src='https://via.placeholder.com/60x60?text=Img';">
                                <div class="carrito-item-info">
                                    <div class="carrito-item-titulo">${producto.nombre}</div>
                                    <div class="carrito-item-precio">${item.cantidad} x $${producto.precio.toFixed(2)} ${producto.moneda}</div>
                                </div>
                                <button class="carrito-item-eliminar" data-index="${index}">üóëÔ∏è</button>
                            </div>`;
                    });
                }
                carritoTotalEl.textContent = `$${totalMonedaPrincipal.toFixed(2)}`;
                contadorCarritoEl.textContent = totalItems;
            }

            productosGrid.addEventListener('click', e => {
                if (e.target.classList.contains('add-to-cart')) {
                    const card = e.target.closest('.producto-card');
                    const id = parseInt(card.dataset.id);
                    const cantidad = parseInt(card.querySelector('.cantidad-input').value);
                    const productoEnCarrito = carrito.find(item => item.id === id);
                    if (productoEnCarrito) {
                        productoEnCarrito.cantidad += cantidad;
                    } else {
                        carrito.push({ id, cantidad });
                    }
                    actualizarCarritoUI();
                } else if (e.target.classList.contains('plus')) {
                    e.target.previousElementSibling.value++;
                } else if (e.target.classList.contains('minus') && e.target.nextElementSibling.value > 1) {
                    e.target.nextElementSibling.value--;
                }
            });

            filtroBtnsTienda.forEach(btn => {
                btn.addEventListener('click', () => {
                    filtroBtnsTienda.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    const categoria = btn.dataset.categoria;
                    const filtrados = categoria === 'todos' ? productos_tienda : productos_tienda.filter(p => p.categoria === categoria);
                    renderizarProductos(filtrados);
                });
            });

            carritoItemsEl.addEventListener('click', e => {
                if(e.target.classList.contains('carrito-item-eliminar')) {
                    carrito.splice(parseInt(e.target.dataset.index), 1);
                    actualizarCarritoUI();
                }
            });
            
            carritoBtn.addEventListener('click', () => carritoModal.style.display = 'flex');
            cerrarCarrito.addEventListener('click', () => carritoModal.style.display = 'none');
            
            enviarWhatsappBtn.addEventListener('click', () => {
                const nombre = document.getElementById('nombre').value || "Cliente";
                const direccion = document.getElementById('direccion').value || "No especificada";
                const telefono = document.getElementById('telefono').value || "No especificado";
                let mensaje = `*Nuevo Pedido de KuikoDelivery*\n\n*Cliente:* ${nombre}\n*Tel√©fono:* ${telefono}\n*Direcci√≥n:* ${direccion}\n\n*Pedido:*\n`;
                let totalGeneral = 0;
                carrito.forEach(item => {
                    const p = productos_tienda.find(prod => prod.id === item.id);
                    mensaje += `‚Ä¢ ${item.cantidad}x ${p.nombre} ($${p.precio} ${p.moneda})\n`;
                    totalGeneral += p.precio * item.cantidad;
                });
                mensaje += `\n*Total a pagar: $${totalGeneral.toFixed(2)}*`;
                // Reemplaza el n√∫mero de tel√©fono con el tuyo
                window.open(`https://wa.me/5353086152?text=${encodeURIComponent(mensaje)}`, '_blank');
            });
        }
    </script>
</body>
</html>